<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set or return list of registered file formats that we can read — fileformats • nat</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Set or return list of registered file formats that we can read — fileformats" />
<meta property="og:description" content="fileformats returns format names, a format definition 
  list or a table of information about the formats that match the given 
  filter conditions.
registerformat registers a format in the io registry
getformatreader gets the function to read a file
getformatwriter gets the function to write a file" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.8.17</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Installation.html">Installation Details</a>
    </li>
    <li>
      <a href="../articles/neurons-intro.html">Introduction to neurons and neuronlists</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/natverse/nat/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set or return list of registered file formats that we can read</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/nat/blob/master/R/neuron-io.R'><code>R/neuron-io.R</code></a></small>
    <div class="hidden name"><code>fileformats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>fileformats</code> returns format names, a format definition 
  list or a table of information about the formats that match the given 
  filter conditions.</p>
<p><code>registerformat</code> registers a format in the io registry</p>
<p><code>getformatreader</code> gets the function to read a file</p>
<p><code>getformatwriter</code> gets the function to write a file</p>
    </div>

    <pre class="usage"><span class='fu'>fileformats</span><span class='op'>(</span>
  format <span class='op'>=</span> <span class='cn'>NULL</span>,
  ext <span class='op'>=</span> <span class='cn'>NULL</span>,
  read <span class='op'>=</span> <span class='cn'>NULL</span>,
  write <span class='op'>=</span> <span class='cn'>NULL</span>,
  class <span class='op'>=</span> <span class='cn'>NULL</span>,
  rval <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"names"</span>, <span class='st'>"info"</span>, <span class='st'>"all"</span><span class='op'>)</span>
<span class='op'>)</span>

<span class='fu'>registerformat</span><span class='op'>(</span>
  format <span class='op'>=</span> <span class='cn'>NULL</span>,
  ext <span class='op'>=</span> <span class='va'>format</span>,
  read <span class='op'>=</span> <span class='cn'>NULL</span>,
  write <span class='op'>=</span> <span class='cn'>NULL</span>,
  magic <span class='op'>=</span> <span class='cn'>NULL</span>,
  magiclen <span class='op'>=</span> <span class='cn'>NA_integer_</span>,
  class <span class='op'>=</span> <span class='cn'>NULL</span>
<span class='op'>)</span>

<span class='fu'>getformatreader</span><span class='op'>(</span><span class='va'>file</span>, class <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>

<span class='fu'>getformatwriter</span><span class='op'>(</span>format <span class='op'>=</span> <span class='cn'>NULL</span>, file <span class='op'>=</span> <span class='cn'>NULL</span>, ext <span class='op'>=</span> <span class='cn'>NULL</span>, class <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>format</th>
      <td><p>Character vector naming the format</p></td>
    </tr>
    <tr>
      <th>ext</th>
      <td><p>Character vector of file extensions (including periods)</p></td>
    </tr>
    <tr>
      <th>read, write</th>
      <td><p>Functions to read and write this format</p></td>
    </tr>
    <tr>
      <th>class</th>
      <td><p>The S3 class for the format (character vector e.g. 'neuron')</p></td>
    </tr>
    <tr>
      <th>rval</th>
      <td><p>Character vector choosing what kind of return value 
<code>fileformats</code> will give.</p></td>
    </tr>
    <tr>
      <th>magic</th>
      <td><p>Function to test whether a file is of this format</p></td>
    </tr>
    <tr>
      <th>magiclen</th>
      <td><p>Optional integer specifying maximum number of bytes required 
from file header to determine file's type.</p></td>
    </tr>
    <tr>
      <th>file</th>
      <td><p>Path to a file</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    
<ul>
<li><p><code>fileformats</code> returns a character vector, matrix or list 
  according to the value of rval.</p></li>
<li><p><code>getformatreader</code> returns a list. The reader can be accessed 
  with <code>$read</code> and the format can be accessed by <code>$format</code>.</p></li>
<li><p><code>getformatwriter</code> returns a list. The writer can be accessed 
  with <code>$write</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>if a <code>format</code> argument is passed to <code>fileformats</code> it will
  be matched with partial string matching and if a unique match exists that
  will be returned.</p>
<p><code>getformatreader</code> starts by reading a set number of bytes from 
  the start off the current file and then checks using file extension and 
  magic functions to see if it can identify the file. Presently formats are 
  in a queue in alphabetical order, dispatching on the first match.</p>
    <h2 class="hasAnchor" id="getformatwriter-output-file"><a class="anchor" href="#getformatwriter-output-file"></a>getformatwriter output file</h2>

    <p>If <code>getformatwriter</code> is passed a 
  <code>file</code> argument, it will be processed based on the registered 
  fileformats information and the <code>ext</code> argument to give a final output 
  path in the <code>$file</code> element of the returned <code>list</code>.</p>  
<p>If <code>ext='.someext'</code> <code>getformatwriter</code> will use the specified 
  extension to overwrite the default value returned by <code>fileformats</code>.</p>  
<p>If <code>ext=NULL</code>, the default, and <code>file='somefilename.someext'</code>
  then <code>file</code> will be untouched and <code>ext</code> will be set to
  <code>'someext'</code> (overriding the value returned by <code>fileformats</code>).</p>  
<p>If <code>file='somefile_without_extension'</code> then the suppplied or 
  calculated extension will be appended to <code>file</code>.</p>  
<p>If <code>ext=NA</code> then the input <code>file</code> name will not be touched (even 
  if it has no extension at all).</p>  
<p>Note that if <code>ext=NULL</code> or <code>ext=NA</code>, then only the specified 
  format or, failing that, the <code>file</code> extension will be used to query 
  the fileformats database for a match.</p>  
<p>See <code><a href='write.neuron.html'>write.neuron</a></code> for code to make this discussion more 
  concrete.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='write.neuron.html'>write.neuron</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># information about the currently registered file formats</span>
<span class='fu'>fileformats</span><span class='op'>(</span>rval<span class='op'>=</span><span class='st'>'info'</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            format     class            ext  read write magic
#&gt; 1  amiralandmarks landmarks .landmarkAscii  TRUE  TRUE  TRUE
#&gt; 2  amiralandmarks landmarks   .landmarkBin  TRUE  TRUE  TRUE
#&gt; 3  amiralandmarks landmarks            .am  TRUE  TRUE  TRUE
#&gt; 4  amiralandmarks landmarks     .amiramesh  TRUE  TRUE  TRUE
#&gt; 5       amiramesh      im3d            .am  TRUE  TRUE  TRUE
#&gt; 6       amiramesh      im3d     .amiramesh  TRUE  TRUE  TRUE
#&gt; 7   cmtklandmarks landmarks     .landmarks  TRUE  TRUE  TRUE
#&gt; 8   fijilandmarks landmarks        .points  TRUE  TRUE  TRUE
#&gt; 9      fijitraces    neuron        .traces  TRUE FALSE  TRUE
#&gt; 10     fijitraces    neuron           .xml  TRUE FALSE  TRUE
#&gt; 11      hxlineset    neuron            .am  TRUE  TRUE  TRUE
#&gt; 12         hxskel    neuron            .am  TRUE  TRUE  TRUE
#&gt; 13         hxsurf    hxsurf          .surf  TRUE  TRUE  TRUE
#&gt; 14         hxsurf    hxsurf            .am  TRUE  TRUE  TRUE
#&gt; 15         hxsurf    hxsurf     .amiramesh  TRUE  TRUE  TRUE
#&gt; 16        neuroml    neuron           .xml  TRUE FALSE  TRUE
#&gt; 17        neuroml    neuron           .nml  TRUE FALSE  TRUE
#&gt; 18           nrrd      im3d          .nrrd  TRUE  TRUE  TRUE
#&gt; 19           nrrd      im3d          .nhdr  TRUE  TRUE  TRUE
#&gt; 20            rds    neuron           .rds  TRUE  TRUE FALSE
#&gt; 21            swc    neuron           .swc  TRUE  TRUE FALSE
#&gt; 22          swcng    ngraph           .swc  TRUE FALSE FALSE
#&gt; 23       vaa3draw      im3d           .v3d  TRUE FALSE  TRUE
#&gt; 24       vaa3draw      im3d        .v3draw  TRUE FALSE  TRUE
#&gt; 25            vtk    neuron           .vtk FALSE  TRUE FALSE</div><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'>registerformat</span><span class='op'>(</span><span class='st'>"swc"</span>,read<span class='op'>=</span><span class='va'>read.swc</span>,write<span class='op'>=</span><span class='va'>read.swc</span>,magic<span class='op'>=</span><span class='va'>is.swc</span>,magiclen<span class='op'>=</span><span class='fl'>10</span>,
  class<span class='op'>=</span><span class='st'>'neuron'</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>swc</span><span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempfile</a></span><span class='op'>(</span>fileext <span class='op'>=</span> <span class='st'>'.swc'</span><span class='op'>)</span>
<span class='fu'><a href='write.neuron.html'>write.neuron</a></span><span class='op'>(</span><span class='va'>Cell07PNs</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>, <span class='va'>swc</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/Logic.html'>isTRUE</a></span><span class='op'>(</span><span class='fu'>getformatreader</span><span class='op'>(</span><span class='va'>swc</span><span class='op'>)</span><span class='op'>$</span><span class='va'>format</span><span class='op'>==</span><span class='st'>'swc'</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>swc</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis, James Manton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


